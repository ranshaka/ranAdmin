(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ff3ee5f6"],{"259f":function(t,e,i){"use strict";i.r(e);var r=i("f2bf");const n={class:"content minHeight100"},a={style:{width:"300px",margin:"50px auto"}},s={class:"turntableBox"},o={class:"turntable-name"},l={class:"turntable-img"},c=["src"];function d(t,e,i,d,f,u){const b=Object(r["W"])("RoundTurntable");return Object(r["N"])(),Object(r["m"])("div",n,[Object(r["n"])("div",a,[Object(r["n"])("h4",null,"剩余抽奖次数:"+Object(r["Z"])(f.num),1),Object(r["n"])("div",s,[Object(r["n"])("img",{onClick:e[0]||(e[0]=(...t)=>u.startRotation&&u.startRotation(...t)),src:"https://img-blog.csdnimg.cn/20201020115304356.png#pic_center",class:"RoundTurntableImg",alt:""}),Object(r["q"])(b,{ref:"roundTurntable",prizeData:f.prizeData,rotateCircle:f.rotateCircle,duringTime:f.duringTime,turntableStyleOption:f.turntableStyleOption,onEndRotation:u.endRotation,class:"turntable"},{item:Object(r["ib"])(t=>[Object(r["n"])("div",o,Object(r["Z"])(t.item.level),1),Object(r["n"])("div",l,[Object(r["n"])("img",{src:t.item.picture},null,8,c)])]),_:1},8,["prizeData","rotateCircle","duringTime","turntableStyleOption","onEndRotation"])])])])}const f=t=>(Object(r["Q"])("data-v-4f9bbfb0"),t=t(),Object(r["O"])(),t),u={class:"turntable",ref:"turntable"},b={id:"canvas",ref:"canvas"},g=f(()=>Object(r["n"])("div",null,null,-1)),p={class:"prize-container"};function h(t,e,i,n,a,s){return Object(r["N"])(),Object(r["m"])("div",u,[Object(r["n"])("div",{class:"myTurntable",style:Object(r["D"])({transform:a.rotateAngle,transition:a.rotateTransition})},[Object(r["n"])("canvas",b," 当前浏览器版本过低,请使用其他浏览器尝试 ",512),g,Object(r["n"])("div",p,[(Object(r["N"])(!0),Object(r["m"])(r["b"],null,Object(r["U"])(i.prizeData,(e,i)=>(Object(r["N"])(),Object(r["m"])("div",{key:i,class:"item",style:Object(r["D"])(s.getRotateAngle(i))},[Object(r["V"])(t.$slots,"item",{item:e},void 0,!0)],4))),128))])],4)],512)}var m={name:"round-turntable",mounted(){this.init()},props:{prizeData:{required:!0},rotateCircle:{default:6},turntableStyleOption:{default:()=>({prizeBgColors:["#ffdfd4","#fffdfe","#ffdfd4","#fffdfe","#ffdfd4","#fffdfe","#ffdfd4","#fffdfe"],borderColor:"#f9dc84"})},duringTime:{default:4.5}},data(){return{startRotateDegree:0,rotateAngle:0,rotateTransition:""}},methods:{getRotateAngle(t){const e=360/this.prizeData.length*t+180/this.prizeData.length;return{transform:`rotate(${e}deg)`}},init(){const t=this.turntableStyleOption,e=this.prizeData.length,{prizeBgColors:i,borderColor:r}=t,n=this.$refs.canvas,a=n.getContext("2d"),s=this.$refs.canvas.width=this.$refs.turntable.clientWidth,o=this.$refs.canvas.height=this.$refs.turntable.clientHeight;a.translate(0,o),a.rotate(-90*Math.PI/180);const l=s/2,c=0,d=2*Math.PI/e;a.clearRect(0,0,s,o),a.strokeStyle=r;for(let f=0;f<e;f++){const t=f*d;a.fillStyle=i[f],a.beginPath(),a.arc(.5*s,.5*o,l,t,t+d,!1),a.arc(.5*s,.5*o,c,t+d,t,!0),a.stroke(),a.fill(),a.save()}},rotate(t){const e=this.duringTime,i=this.startRotateDegree+360*this.rotateCircle+360-(180/this.prizeData.length+360/this.prizeData.length*t)-this.startRotateDegree%360;this.startRotateDegree=i,this.rotateAngle=`rotate(${i}deg)`,this.rotateTransition=`transform ${e}s cubic-bezier(0.250, 0.460, 0.455, 0.995)`,setTimeout(()=>{this.$emit("endRotation")},1e3*e+500)}}},j=(i("36b6"),i("6b0d")),O=i.n(j);const v=O()(m,[["render",h],["__scopeId","data-v-4f9bbfb0"]]);var z=v,R={name:"lattice",components:{RoundTurntable:z},data(){return{prizeData:[{id:1,level:"2000元京东券",picture:"../../assets/images/user.jpg"},{id:2,level:"300元京东券",picture:"../../assets/images/user.jpg"},{id:3,level:"50个比特币",picture:"../../assets/images/user.jpg"},{id:4,level:"50元话费券",picture:"../../assets/images/user.jpg"},{id:5,level:"100元话费券",picture:"../../assets/images/user.jpg"},{id:6,level:"100个比特币",picture:"../../assets/images/user.jpg"},{id:7,level:"100个比特币",picture:"../../assets/images/user.jpg"},{id:8,level:"100个比特币",picture:"../../assets/images/user.jpg"}],rotateCircle:6,duringTime:4.5,turntableStyleOption:{prizeBgColors:["#ffe0d6","#fffdfe","#ffe0d6","#fffdfe","#ffe0d6","#fffdfe","#ffe0d6","#fffdfe"],borderColor:"#fede87"},prizeIndex:-1,isLocking:!1,num:5}},methods:{startRotation(){if(!this.canBeRotated())return!1;this.isLocking=!0;const t=Math.floor(Math.random()*this.prizeData.length);this.num--,this.prizeIndex=t,this.$refs.roundTurntable.rotate(t)},endRotation(){alert("恭喜您获奖啦,您的奖品是;"+this.prizeData[this.prizeIndex].level),this.isLocking=!1},canBeRotated(){return this.num<=0?(alert("已经木有次数啦!"),!1):!this.isLocking}}};i("4161");const D=O()(R,[["render",d]]);e["default"]=D},"36b6":function(t,e,i){"use strict";i("bb80")},4161:function(t,e,i){"use strict";i("e9df")},bb80:function(t,e,i){},e9df:function(t,e,i){}}]);